<ngx-ui-loader [loaderId]="'obj'"></ngx-ui-loader>
<div class="row">

    <div class="col-md-12">
        <nb-card>
            <nb-card-header>
                An√°lisis de resultados
            </nb-card-header>
            <nb-card-body>
                <nb-tabset>
                    <nb-tab tabTitle="Global">
                        <div class="row">

                            <div class="col-md-3">
                                <mat-form-field class="full-width">
                                    <mat-label>Curso</mat-label>
                                    <mat-select (selectionChange)="onSelectedGeneralGrade($event)"
                                        [(ngModel)]="selectedGradeId">
                                        <mat-option *ngFor="let grade of grades" [value]="grade.id">
                                            {{grade.description }}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                            <div class="col-md-3">
                                <mat-form-field class="full-width">
                                    <mat-label> Asignatura</mat-label>
                                    <mat-select (selectionChange)="onSelectedGeneralSubject($event)"
                                        [(ngModel)]="selectedSubjectId">
                                        <mat-option *ngFor="let subject of subjects" [value]="subject.id">
                                            {{subject.description }}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                        </div>
                        <mat-divider></mat-divider>
                        <div class="col-md-12" *ngIf="data">
                            <ngx-charts-bar-vertical-normalized [view]="view" [scheme]="colorScheme" [results]="multi3"
                                [gradient]="gradient" [xAxis]="showXAxis" [yAxis]="showYAxis" [legend]="showLegend"
                                [legendTitle]="legendTitle" [showXAxisLabel]="showXAxisLabel"
                                [showYAxisLabel]="showYAxisLabel" [maxXAxisTickLength]="17" [xAxisLabel]="xAxisLabel"
                                [yAxisLabel]="yAxisLabel">
                            </ngx-charts-bar-vertical-normalized>
                        </div>
                    </nb-tab>
                    <nb-tab tabTitle="Detalle">
                        <div class="row">
                            <div class="col-md-4">
                                <mat-form-field class="full-width">
                                    <mat-label> Curso</mat-label>
                                    <mat-select (selectionChange)="onSelectedGrade($event)">
                                        <mat-option *ngFor="let grade of grades" [value]="grade.id">
                                            {{grade.description }}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                            <div class="col-md-4">
                                <mat-form-field class="full-width">
                                    <mat-label> Asignatura</mat-label>
                                    <mat-select (selectionChange)="onSelectedSubject($event)">
                                        <mat-option *ngFor="let subject of subjects" [value]="subject.id">
                                            {{subject.description }}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                            <div class="col-md-4">
                                <mat-form-field class="full-width">
                                    <mat-label>Objetivo</mat-label>
                                    <mat-select (selectionChange)="onSelectedObjective($event)">
                                        <mat-option *ngFor="let objective of tempFilteredLearningObjectives"
                                            [value]="objective.id">
                                            {{objective.description }}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                        </div>

                        <div *ngIf="objectiveData.length">
                            <mat-divider></mat-divider>
                            <div class="row" *ngIf="data2">
                                <h4>Indicadores</h4>
                                <ngx-charts-bar-vertical-normalized [view]="view2" [scheme]="colorScheme"
                                    [results]="multi2" [gradient]="gradient" [xAxis]="showXAxis" [yAxis]="showYAxis"
                                    [legend]="false" [showXAxisLabel]="showXAxisLabel" [showYAxisLabel]="showYAxisLabel"
                                    [xAxisLabel]="xAxisLabel2" [maxXAxisTickLength]="17" [yAxisLabel]="yAxisLabel"
                                    [legendTitle]="legendTitle">
                                </ngx-charts-bar-vertical-normalized>
                            </div>
                            <mat-divider></mat-divider>
                            <div class="row" *ngIf="data2">
                                <h4>Objetivos</h4>
                                <ngx-charts-bar-vertical-normalized [view]="view" [scheme]="colorScheme"
                                    [results]="multi" [gradient]="gradient" [xAxis]="showXAxis" [yAxis]="showYAxis"
                                    [legend]="showLegend" [showXAxisLabel]="showXAxisLabel"
                                    [showYAxisLabel]="showYAxisLabel" [xAxisLabel]="xAxisLabel"
                                    [yAxisLabel]="yAxisLabel" [maxXAxisTickLength]="17" [legendTitle]="legendTitle">
                                </ngx-charts-bar-vertical-normalized>
                            </div>

                        </div>
                    </nb-tab>

                </nb-tabset>
            </nb-card-body>
        </nb-card>
    </div>
</div>